
server:
  port: 0 # тесты не должны занимать фиксированный порт

spring:
  application:
    name: user-service-test

  datasource:
    url: jdbc:tc:postgresql:16-alpine:///testdb   # Testcontainers JDBC URL
    driver-class-name: org.testcontainers.jdbc.ContainerDatabaseDriver
    username: test
    password: test

  jpa:
    hibernate:
      ddl-auto: create-drop
    properties:
      hibernate:
        format_sql: true
    show-sql: false

  kafka:
    bootstrap-servers: dummy:9092  # отключаем реальный брокер
    consumer:
      enabled: false
    producer:
      enabled: false

  mail:
    host: localhost
    port: 2525
    username: test
    password: test
    properties:
      mail:
        smtp:
          auth: false
          starttls:
            enable: false

  cloud:
    config:
      enabled: false   # отключаем Config Server
    discovery:
      enabled: false   # отключаем Eureka для тестов

logging:
  level:
    org:
      springframework:
        context: DEBUG
        orm:
          jpa: DEBUG
        transaction: DEBUG
      hibernate:
        SQL: DEBUG
        type.descriptor.sql.BasicBinder: TRACE
    mapstruct: TRACE

  pattern:
    console: "%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"

testcontainers:
  reuse: true
